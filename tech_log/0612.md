# 0612

## ✓오늘 구현한 항목

- Review List 완성
- Review Delete 완성
- Review Detail은 뼈대만 만들고, 디자인은 미완성
  - 평점 애니메이션 추가 완성
  - Review Detail 좋아요 버튼 완성
  - 모달로 예고편 보기 띄우기를 시도했으나 YOUTUBE_API_KEY 때문에 오류 발생
- CommentCreate 완성
- 전체적인 색감 밸런스 맞추기 
- Movie List 첫번째 영화 (왼쪽 영화) title이 가려지는 문제로 title을 중앙으로 배치, padding-left 값 추가
- 버튼 스타일 추가 (Hover 색깔 추가)
- DB 관련 수정: 전체 데이터에서 필요한 값만 받게 만들었다.
  - 데이터 추출 및 가공 

  

<br>

## 💡어려웠던 점 및 배운 점

### Text FIelds

#### ❗️어려웠던 점

- Text Fields의 너비를 고정하는 데 어려움을 겪었습니다.

#### :star: 배운 점

- CSS에서 width: 100% 값을 주어 text field가 부모의 너비만큼 차지하도록 만들었습니다.

<br>

### 데이터 format

#### ❗️어려웠던 점

- axios 요청을 통해 가져온 데이터를 format 하는 것이 어려웠습니다.
  - video.snippet.title에 &#39와 같은 문자열들이 들어있었고 이를 해결하는 과정이 어려웠습니다.

#### :star: 배운 점

- &#39는 특수문자를 뜻하는 문자열이었습니다.
- 이를 template에서 사용자에게 보여줄 때 formatting 하기 위해 

<br>

### 환경 설정 (.env.local)

#### ❗️어려웠던 점

- .env.local 파일을 고친 후 지속적으로 Youtube 예고편 보기가 작동하지 않아 어려움을 겪었습니다.

:star: 배운 점

- .env.local 파일을 고쳤다면 무조건 서버를 껐다 켜야합니다.
- `.env`와 `.env.local`과 같은 환경설정 파일은 서버가 시작될 때 설정됩니다. (환경변수를 새로 적용하기 위해서는 서버를 다시 실행해야합니다.)

<br>

### 예고편 보기 (Modal)

#### ❗️어려웠던 점

- Youtube API KEY가 너무 빨리 quota를 채워져 어려움을 겪었습니다.
  - 하루에 10,000번의 quota가 제공되지만 영상 재생을 눌렀을 때 그 속도가 급격히 빨라져 얼마 못가 quota limit이 채워졌습니다.
  - 그래서 quota 올리기를 하려고 Google Developer Console에서 시도했으나 회사만 가능한 듯하여 하지 않았습니다.
- Movie Detail 페이지에서 예고편 보기 두 번 클릭해야만 예고편이 모달로 띄워지는 문제를 겪었습니다.
  - 예고편과 모달을 잇는 점이 가장 어려웠습니다.
  - 예고편을 처음 클릭했을 때는, 동영상 정보를 가져오도록 동작이 되었고, 두 번째로 클릭했을 때 그제서야 가져온 정보를 바탕으로 영상을 띄워줬습니다.
    - 이 방식이 잘못되었다는 것을 깨달아 다시 코드를 바꾸었습니다.

<br>

###  Axios 요청

#### ⭐️배운 점

- get은 요청은 body가 없고, header와 URL이 필요합니다. 
- axios(URL, Header)

<br>

### 댓글 작성

#### ❗️어려웠던 점

- 리뷰에 댓글을 작성, 수정, 삭제하는 것을 비동기 요청으로 구현하는 것이 어려웠습니다.

#### ⭐️배운 점

- Javascript를 이용해서 구현하였지만 정석적인 방식이 아니어서 나중에 문제가 될지도 모르겠습니다.

<br>

### 검색창

#### ❗️어려웠던 점

- 2시간 동안 동작을 안했는데 서버를 재실행하니까 되었습니다. 환경 변수나 기타 다른 문제였던 것 같습니다.

<br>

### 라우터

#### ❗️어려웠던 점

- 뒤로가기나 권한이 필요한 페이지를 로드할 경우 웹페이지가 잘 동작하지 않았습니다. 
- 여러 명이 사용할 수도 있으므로 한 유저가 게시물을 보고 있을 때 작성자가 글을 지울 경우 댓글을 달 수 없으므로 유저에게 '이미 삭제된 게시물입니다.' 라는 메시지를 전해주어야했습니다.

#### :star:배운 점

- 라우터 설정에 문제가 있어 Vue 공식 문서를 참고하여 라우터 설정을 고쳤습니다.
- `router.beforeEach((to,from,next))`를 활용하여 로그인이 필요한 페이지와 그렇지 않은 페이지로 나누어서 설정했습니다.
- 나중에 시간이 되면 삭제된 게시물 메시지를 설정할 예정입니다.

<br>

### 평점 추가

#### ❗️어려웠던 점

- 기존에 있던 모델에 새로운 모델을 추가해야했습니다.
- 평점은 유저와 영화 사이의 관계이지만, 결국 보여지는 것은 유저가 남긴 리뷰였기 때문에 모델 구조를 어떻게 구성할지를 고민했습니다. 

#### ⭐️배운 점

- 영화와 유저를 ManyToMany 필드를 이용하여 연결한 다음 중계모델인 `GenreMovie`를 이용해서 rank 필드를 추가해서 만들었습니다.

<br>

### 리뷰 생성

#### ❗️어려웠던 점

- 리뷰 생성과 수정을 같은 URL을 사용해서 만들었습니다.
- 하지만 수정 페이지에서 새로고침을 할 경우 리뷰 페이지로 이동합니다.

#### ⭐️배운 점

- 다른 링크 같은 컴포넌트로 내일 변경시킬 예정입니다.

<br>

## 💭느낀 점

- 저장을 확인하지 않고 진행할 경우 에러가 발생하지 않는데 원하는데로 동작하지 않을 수 있습니다. 저장을 생활화합시다.
- Vue template 작성시 반드시 한 개의 element가 있어야하므로 처음 생성할 때 태그를 하나 생성하는 게 좋습니다. 
- Django가 지원하는 admin으로 DB를 쉽게 관리할 수 있습니다.
- Vue와 django 파트를 완전히 분리하는 것은 불가능하므로 데이터를 어떤 방식으로 설정할지가 매우 중요했습니다.

<br>

## 📆내일 구현할 항목

- DB 실제 로컬 서버에 적용 
- 게시글, 댓글 수정 만들기
- 댓글 삭제 만들기
- 영화 추천 페이지 만들기
- 프로필 페이지 추가하기
- 가능하면: 검색창 만들기





